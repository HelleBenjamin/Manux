IFNDEF __KERNEL_INC__
__KERNEL_INC__ EQU 1

; MANUX include file

KERNEL_WORKSPACE  EQU STACK_START

KERNEL_SP         EQU KERNEL_WORKSPACE-2
USER_SP           EQU KERNEL_WORKSPACE-4
PROCESS_SP        EQU KERNEL_WORKSPACE-6
SYSCALL_COUNT     EQU KERNEL_WORKSPACE-8
KERNEL_FLAGS      EQU KERNEL_WORKSPACE-10
PROC_COUNT        EQU KERNEL_WORKSPACE-12
TEMP_SP           EQU KERNEL_WORKSPACE-14

; Temporal registers
TMP_REG1          EQU KERNEL_WORKSPACE-16
TMP_REG2          EQU KERNEL_WORKSPACE-18
TMP_REG3          EQU KERNEL_WORKSPACE-20

; Setup stacks
PROCESS_STACK     EQU STACK_START-0xFF ; 256 bytes
KERNEL_STACK      EQU STACK_START-0x200 ; 256 bytes
USER_STACK        EQU STACK_START-0x300 ; n bytes

IFNDEF SYSCALL_VECTOR
; Define default syscall vector if it isn't defined already
SYSCALL_VECTOR    EQU 0xB000
ENDIF

SECTION DATA

SYSINFO:
  ;db "Manux   Z80-PC   0.2    release  Z80   ", 0
  db "Manux   Z80-PC   0.2    dev      Z80   ", 0
MSG:
  db "Hellord", 0DH, 0AH, 0

ENDIF